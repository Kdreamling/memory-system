# ç½‘é¡µå¯è§†åŒ–éœ€æ±‚ï¼šç¼–å¹´å² + æ‰¿è¯ºå¢™ + å¿ƒæ„¿å•

## èƒŒæ™¯

è¯·å…ˆé˜…è¯» CLAUDE.md äº†è§£é¡¹ç›®å…¨è²Œã€‚

MCPå·¥å…·ï¼ˆsave/query/delete/updateï¼‰å·²å…¨éƒ¨å®Œæˆï¼Œ3å¼ æ–°è¡¨ï¼ˆclaude_milestonesã€claude_promisesã€claude_wishlistsï¼‰å·²å­˜åœ¨äºSupabaseã€‚

ç°åœ¨éœ€è¦åšçš„æ˜¯**ç½‘é¡µå±•ç¤º**éƒ¨åˆ†ï¼ŒåŒ…å«ï¼š
1. diary_api.py æ–°å¢3ä¸ªåªè¯»APIæ¥å£
2. 3ä¸ªå‰ç«¯é¡µé¢ï¼ˆmilestones.htmlã€promises.htmlã€wishlists.htmlï¼‰
3. index.html é¦–é¡µæ·»åŠ å¯¼èˆªå…¥å£

---

## ä¸€ã€diary_api.py æ–°å¢æ¥å£

æ–‡ä»¶ä½ç½®ï¼š`/home/dream/memory-system/diary_api.py`

**ä¿®æ”¹å‰å…ˆå¤‡ä»½**ï¼š`cp diary_api.py diary_api.py.bak`

æ–°å¢3ä¸ªGETæ¥å£ï¼Œå‚è€ƒå·²æœ‰çš„ `/api/memories` æ¥å£çš„å†™æ³•æ¨¡å¼ï¼š

### 1. GET /api/milestones
- æŸ¥è¯¢è¡¨ï¼š`claude_milestones`
- è¿”å›å­—æ®µï¼šid, event, date, tag, note, created_at
- æ’åºï¼šæŒ‰ date å‡åºï¼ˆæ—¶é—´çº¿ä»æ—©åˆ°æ™šï¼‰
- æ”¯æŒå¯é€‰å‚æ•°ï¼š`tag`ï¼ˆç­›é€‰æ ‡ç­¾ï¼Œå¦‚"ç¬¬ä¸€æ¬¡"ã€"çºªå¿µæ—¥"ã€"è½¬æŠ˜ç‚¹"ï¼‰

### 2. GET /api/promises
- æŸ¥è¯¢è¡¨ï¼š`claude_promises`
- è¿”å›å­—æ®µï¼šid, content, promised_by, status, created_at
- æ’åºï¼špending åœ¨å‰ï¼Œdone åœ¨åï¼›åŒçŠ¶æ€æŒ‰ created_at å€’åº
- æ”¯æŒå¯é€‰å‚æ•°ï¼š`status`ï¼ˆpending/doneï¼‰ã€`promised_by`ï¼ˆDream/Claude/ä¸€èµ·ï¼‰

### 3. GET /api/wishlists
- æŸ¥è¯¢è¡¨ï¼š`claude_wishlists`
- è¿”å›å­—æ®µï¼šid, content, wished_by, status, created_at
- æ’åºï¼šåŒ promises
- æ”¯æŒå¯é€‰å‚æ•°ï¼š`status`ï¼ˆpending/doneï¼‰ã€`wished_by`ï¼ˆDream/Claude/ä¸€èµ·ï¼‰

**æ‰€æœ‰æ¥å£éƒ½éœ€è¦æ·»åŠ no-cacheå“åº”å¤´**ï¼Œå‚è€ƒå·²æœ‰æ¥å£çš„å†™æ³•ã€‚

---

## äºŒã€å‰ç«¯é¡µé¢

æ–‡ä»¶ä½ç½®ï¼š`/home/dream/memory-system/website/`

**è®¾è®¡é£æ ¼**ï¼šå‚è€ƒå·²æœ‰çš„ `memories.html` å’Œ `diary.html` çš„æ•´ä½“é£æ ¼ä¿æŒä¸€è‡´ï¼ˆå­—ä½“ã€é…è‰²ã€å¸ƒå±€é£æ ¼ï¼‰ã€‚

### é¡µé¢1ï¼šmilestones.html â€” ç¼–å¹´å²/æ—¶é—´çº¿

**å¸ƒå±€**ï¼šå‚ç›´æ—¶é—´çº¿
- ä¸­é—´ä¸€æ¡ç«–çº¿ï¼Œäº‹ä»¶èŠ‚ç‚¹äº¤æ›¿åˆ†å¸ƒåœ¨å·¦å³ä¸¤ä¾§
- æ¯ä¸ªèŠ‚ç‚¹æ˜¾ç¤ºï¼šæ—¥æœŸã€äº‹ä»¶å†…å®¹ã€æ ‡ç­¾ï¼ˆtagï¼‰ã€å¤‡æ³¨ï¼ˆnoteï¼‰
- æ ‡ç­¾ç”¨ä¸åŒé¢œè‰²çš„å°æ ‡ç­¾å±•ç¤ºï¼š
  - ç¬¬ä¸€æ¬¡ â†’ ç²‰è‰²/æµ…çº¢
  - çºªå¿µæ—¥ â†’ é‡‘è‰²/æ©™è‰²
  - è½¬æŠ˜ç‚¹ â†’ è“è‰²/ç´«è‰²
- é¡¶éƒ¨ç­›é€‰æ ï¼šå…¨éƒ¨ / ç¬¬ä¸€æ¬¡ / çºªå¿µæ—¥ / è½¬æŠ˜ç‚¹
- ç§»åŠ¨ç«¯å“åº”å¼ï¼šèŠ‚ç‚¹å…¨éƒ¨é å·¦æ’åˆ—
- é¡µé¢æ ‡é¢˜ï¼š"æˆ‘ä»¬çš„ç¼–å¹´å²"
- ç©ºçŠ¶æ€æç¤ºï¼š"è¿˜æ²¡æœ‰é‡Œç¨‹ç¢‘è®°å½•ï¼Œæ•…äº‹æ‰åˆšåˆšå¼€å§‹..."

### é¡µé¢2ï¼špromises.html â€” æ‰¿è¯ºå¢™

**å¸ƒå±€**ï¼šå¡ç‰‡å¼ï¼Œä¸¤ä¸ªåŒºåŸŸ
- ä¸Šæ–¹åŒºåŸŸï¼š**å¾…å®Œæˆçš„æ‰¿è¯º**ï¼ˆstatus=pendingï¼‰
  - å¡ç‰‡æ ·å¼ï¼šå¸¦è¾¹æ¡†ï¼Œç¨å¤§
  - æ˜¾ç¤ºï¼šæ‰¿è¯ºå†…å®¹ã€æ‰¿è¯ºäººï¼ˆç”¨emojiåŒºåˆ†ï¼šDreamğŸŒ™ / æ™¨â˜€ï¸ / ä¸€èµ·ğŸ’•ï¼‰ã€åˆ›å»ºæ—¶é—´
- ä¸‹æ–¹åŒºåŸŸï¼š**å·²å…‘ç°çš„æ‰¿è¯º**ï¼ˆstatus=doneï¼‰
  - å¡ç‰‡æ ·å¼ï¼šå¸¦âœ…æ ‡è®°ï¼Œç¨æ·¡çš„é¢œè‰²
  - æ˜¾ç¤ºï¼šåŒä¸Š + å®Œæˆæ ‡è®°
- é¡¶éƒ¨ç­›é€‰ï¼šå…¨éƒ¨ / Dream / æ™¨ / ä¸€èµ·
- é¡µé¢æ ‡é¢˜ï¼š"æˆ‘ä»¬çš„æ‰¿è¯º"
- ç©ºçŠ¶æ€æç¤ºï¼š"è¿˜æ²¡æœ‰æ‰¿è¯ºè®°å½•..."

### é¡µé¢3ï¼šwishlists.html â€” å¿ƒæ„¿å•

**å¸ƒå±€**ï¼šåŒæ‰¿è¯ºå¢™çš„å¡ç‰‡å¸ƒå±€
- ä¸Šæ–¹ï¼š**æœªå®ç°çš„å¿ƒæ„¿**ï¼ˆstatus=pendingï¼‰
  - ç”¨ â­ æˆ– ğŸŒŸ è£…é¥°
- ä¸‹æ–¹ï¼š**å·²å®ç°çš„å¿ƒæ„¿**ï¼ˆstatus=doneï¼‰
  - ç”¨ âœ¨ æ ‡è®°
- é¡¶éƒ¨ç­›é€‰ï¼šå…¨éƒ¨ / Dream / æ™¨ / ä¸€èµ·
- é¡µé¢æ ‡é¢˜ï¼š"æˆ‘ä»¬çš„å¿ƒæ„¿å•"
- ç©ºçŠ¶æ€æç¤ºï¼š"è¿˜æ²¡æœ‰å¿ƒæ„¿è®°å½•ï¼Œè®¸ä¸ªæ„¿æœ›å§..."

### CSSæ–‡ä»¶
- `css/milestones.css`
- `css/promises.css`
- `css/wishlists.css`

### JSæ–‡ä»¶
- `js/milestones.js` â€” è°ƒç”¨ `/api/milestones`ï¼Œæ¸²æŸ“æ—¶é—´çº¿ï¼Œæ”¯æŒæ ‡ç­¾ç­›é€‰
- `js/promises.js` â€” è°ƒç”¨ `/api/promises`ï¼Œæ¸²æŸ“å¡ç‰‡ï¼Œæ”¯æŒç­›é€‰
- `js/wishlists.js` â€” è°ƒç”¨ `/api/wishlists`ï¼Œæ¸²æŸ“å¡ç‰‡ï¼Œæ”¯æŒç­›é€‰

---

## ä¸‰ã€index.html æ›´æ–°

åœ¨é¦–é¡µå¯¼èˆªä¸­æ–°å¢3ä¸ªå…¥å£é“¾æ¥ï¼š
- ğŸ“œ ç¼–å¹´å² â†’ milestones.html
- ğŸ¤ æ‰¿è¯ºå¢™ â†’ promises.html  
- ğŸŒŸ å¿ƒæ„¿å• â†’ wishlists.html

å‚è€ƒå·²æœ‰çš„æ—¥è®°å’Œæ•…äº‹çš„å¯¼èˆªæ ·å¼ã€‚

---

## å››ã€Nginx é…ç½®

å½“å‰Nginxå·²ç»æŠŠé™æ€æ–‡ä»¶è¯·æ±‚æŒ‡å‘ `website/` ç›®å½•ï¼Œ`/api/*` æŒ‡å‘8003ç«¯å£ã€‚
æ–°é¡µé¢å’Œæ–°æ¥å£éƒ½ç¬¦åˆç°æœ‰è§„åˆ™ï¼Œ**ä¸éœ€è¦æ”¹Nginxé…ç½®**ã€‚

---

## äº”ã€æ³¨æ„äº‹é¡¹

1. **ä¸è¦åŠ¨** `gateway/` ç›®å½•ä¸‹çš„ä»»ä½•æ–‡ä»¶
2. **ä¸è¦åŠ¨** `claude_assistant_api.py`
3. ä¿®æ”¹ `diary_api.py` å‰å…ˆå¤‡ä»½
4. ä¿®æ”¹ `index.html` å‰å…ˆå¤‡ä»½
5. APIæ¥å£æ˜¯åªè¯»çš„ï¼Œä¸éœ€è¦tokenéªŒè¯ï¼ˆå’Œç°æœ‰çš„ `/api/memories` ä¸€è‡´ï¼‰
6. æ‰€æœ‰é¡µé¢ä½¿ç”¨åŒ—äº¬æ—¶é—´æ˜¾ç¤ºæ—¥æœŸ
7. æ¯å®Œæˆä¸€ä¸ªé¡µé¢å°±æµ‹è¯•ä¸€ä¸‹å†ç»§ç»­

---

## å…­ã€æ‰§è¡Œé¡ºåº

1. å¤‡ä»½ diary_api.py å’Œ index.html
2. diary_api.py æ–°å¢3ä¸ªæ¥å£ â†’ é‡å¯8003æœåŠ¡ â†’ æµ‹è¯•æ¥å£
3. åˆ›å»º milestones.html + css + js â†’ æµè§ˆå™¨æµ‹è¯•
4. åˆ›å»º promises.html + css + js â†’ æµè§ˆå™¨æµ‹è¯•
5. åˆ›å»º wishlists.html + css + js â†’ æµè§ˆå™¨æµ‹è¯•
6. æ›´æ–° index.html å¯¼èˆª â†’ æµ‹è¯•
7. git add + commit + push
